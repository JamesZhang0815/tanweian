<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½å¥åº·ç®¡ç†ç³»ç»Ÿ Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.0.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <style>
        :root {
            --primary: #4285F4;
            --primary-light: #E8F0FE;
            --secondary: #34A853;
            --secondary-light: #E6F4EA;
            --warning: #FBBC05;
            --warning-light: #FEF7E0;
            --danger: #EA4335;
            --danger-light: #FCE8E6;
            --light: #F8F9FA;
            --dark: #202124;
            --gray: #5F6368;
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Microsoft YaHei', 'PingFang SC', sans-serif;
        }
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2.5rem;
            text-align: center;
            border-radius: 12px 12px 0 0;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--warning), var(--danger));
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.12);
        }
        h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #eee;
            font-size: 1.6rem;
        }
        h3 {
            color: var(--dark);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.8rem;
        }
        .form-group {
            margin-bottom: 1.8rem;
            position: relative;
        }
        label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 600;
            color: var(--gray);
        }
        input, select, textarea {
            width: 100%;
            padding: 0.9rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.2);
        }
        .btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            display: block;
            margin: 3rem auto;
            width: 240px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            transition: all 0.3s;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            opacity: 0.95;
        }
        .btn:active {
            transform: translateY(0);
        }
        .result-section {
            display: none;
            animation: fadeIn 0.6s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chart-container {
            margin: 2.5rem 0;
            height: 350px;
            position: relative;
        }
        .health-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.8rem;
            margin: 2.5rem 0;
        }
        .status-card {
            padding: 1.8rem;
            border-radius: 10px;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
            border-left: 6px solid var(--primary);
        }
        .status-card:hover {
            transform: translateY(-5px);
        }
        .status-card h3 {
            color: var(--primary);
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
        }
        .status-card h3 i {
            margin-right: 0.6rem;
            font-size: 1.4rem;
        }
        .status-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        .status-description {
            font-size: 1rem;
            color: var(--gray);
        }
        .advice-section {
            background: var(--light);
            padding: 1.8rem;
            border-radius: 10px;
            margin: 2rem 0;
            border-left: 6px solid var(--primary);
        }
        .advice-section.nutrition {
            background: var(--secondary-light);
            border-left-color: var(--secondary);
        }
        .advice-section.notes {
            background: var(--warning-light);
            border-left-color: var(--warning);
        }
        .advice-section.warning {
            background: var(--danger-light);
            border-left-color: var(--danger);
        }
        .advice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        .advice-item {
            background: white;
            padding: 1.2rem;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        .advice-item h4 {
            color: var(--primary);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
        }
        .advice-item h4 i {
            margin-right: 0.5rem;
        }
        .progress-section {
            margin: 2.5rem 0;
        }
        .progress-container {
            width: 100%;
            background-color: #f0f0f0;
            border-radius: 10px;
            height: 12px;
            margin: 1rem 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            border-radius: 10px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0;
            transition: width 1s ease-in-out;
        }
        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--gray);
        }
        .tab-container {
            margin: 2rem 0;
        }
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 1.5rem;
        }
        .tab {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-weight: 600;
            color: var(--gray);
        }
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .exercise-plan {
            margin: 1.5rem 0;
        }
        .exercise-day {
            margin-bottom: 2rem;
        }
        .exercise-day h4 {
            color: var(--secondary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px dashed #ddd;
        }
        .exercise-item {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            border-left: 4px solid var(--primary);
            transition: transform 0.3s ease;
        }
        .exercise-item:hover {
            transform: translateX(5px);
        }
        .exercise-item h5 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        .exercise-details {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }
        .exercise-detail {
            background: var(--light);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
        }
        .nutrition-plan {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        .meal-card {
            background: white;
            padding: 1.2rem;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        .meal-card h4 {
            color: var(--secondary);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
        }
        .meal-card h4 i {
            margin-right: 0.5rem;
        }
        .meal-item {
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
        }
        .meal-item-name {
            font-weight: 500;
        }
        .meal-item-amount {
            color: var(--gray);
        }
        .print-btn {
            background: var(--warning);
            color: var(--dark);
            border: none;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 1rem 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .print-btn:hover {
            background: #f8b500;
            transform: translateY(-2px);
        }
        @media print {
            .no-print {
                display: none;
            }
            body {
                padding: 0;
                background: white;
            }
            .card {
                box-shadow: none;
                padding: 0;
                margin-bottom: 1.5rem;
            }
            .result-section {
                display: block !important;
            }
        }
        @media (max-width: 768px) {
            .form-grid, .health-status, .advice-grid, .nutrition-plan {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 2rem;
            }
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>æ™ºèƒ½å¥åº·ç®¡ç†ç³»ç»Ÿ Pro</h1>
            <p class="subtitle">å…¨é¢å¥åº·è¯„ä¼°ä¸ä¸ªæ€§åŒ–è¿åŠ¨è¥å…»æ–¹æ¡ˆ</p>
        </header>

        <div class="card no-print">
            <h2>ä¸ªäººä¿¡æ¯</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="name">å§“å</label>
                    <input type="text" id="name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" required>
                </div>
                <div class="form-group">
                    <label for="gender">æ€§åˆ«</label>
                    <select id="gender" required>
                        <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
                        <option value="male">ç”·æ€§</option>
                        <option value="female">å¥³æ€§</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="age">å¹´é¾„</label>
                    <input type="number" id="age" placeholder="è¯·è¾“å…¥å¹´é¾„" min="10" max="100" required>
                </div>
            </div>
        </div>

        <div class="card no-print">
            <h2>èº«ä½“æ•°æ®</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="height">èº«é«˜ (cm)</label>
                    <input type="number" id="height" placeholder="è¯·è¾“å…¥èº«é«˜" min="100" max="250" required>
                </div>
                <div class="form-group">
                    <label for="weight">ä½“é‡ (kg)</label>
                    <input type="number" id="weight" placeholder="è¯·è¾“å…¥ä½“é‡" min="30" max="200" step="0.1" required>
                </div>
                <div class="form-group">
                    <label for="waist">è…°å›´ (cm)</label>
                    <input type="number" id="waist" placeholder="å¯é€‰" min="50" max="150">
                </div>
                <div class="form-group">
                    <label for="hip">è‡€å›´ (cm)</label>
                    <input type="number" id="hip" placeholder="å¯é€‰" min="60" max="150">
                </div>
            </div>
        </div>

        <div class="card no-print">
            <h2>å¥åº·çŠ¶å†µä¸ç›®æ ‡</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="activity">æ—¥å¸¸æ´»åŠ¨æ°´å¹³</label>
                    <select id="activity" required>
                        <option value="">è¯·é€‰æ‹©æ´»åŠ¨æ°´å¹³</option>
                        <option value="sedentary">ä¹…åå°‘åŠ¨ (å‡ ä¹ä¸è¿åŠ¨)</option>
                        <option value="light">è½»åº¦æ´»åŠ¨ (æ¯å‘¨1-3æ¬¡è½»åº¦è¿åŠ¨)</option>
                        <option value="moderate">ä¸­åº¦æ´»è·ƒ (æ¯å‘¨3-5æ¬¡ä¸­ç­‰å¼ºåº¦è¿åŠ¨)</option>
                        <option value="active">éå¸¸æ´»è·ƒ (æ¯å‘¨6-7æ¬¡é«˜å¼ºåº¦è¿åŠ¨)</option>
                        <option value="athlete">è¿åŠ¨å‘˜çº§åˆ« (æ¯å¤©é«˜å¼ºåº¦è®­ç»ƒ)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="goal">å¥åº·ç›®æ ‡</label>
                    <select id="goal" required>
                        <option value="">è¯·é€‰æ‹©å¥åº·ç›®æ ‡</option>
                        <option value="weight-loss">å‡è„‚å‡é‡</option>
                        <option value="muscle-gain">å¢è‚Œå¡‘å½¢</option>
                        <option value="fitness">ä¿æŒå¥åº·</option>
                        <option value="endurance">æé«˜è€åŠ›</option>
                        <option value="recovery">ä¼¤ç—…æ¢å¤</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="injuries">ä¼¤ç—…å² (å¯é€‰)</label>
                    <input type="text" id="injuries" placeholder="å¦‚è†ç›–æŸä¼¤ã€è…°æ¤é—®é¢˜ç­‰">
                </div>
                <div class="form-group">
                    <label for="conditions">æ…¢æ€§ç–¾ç—… (å¯é€‰)</label>
                    <input type="text" id="conditions" placeholder="å¦‚é«˜è¡€å‹ã€ç³–å°¿ç—…ã€å¿ƒè„ç—…ç­‰">
                </div>
            </div>
        </div>

        <button class="btn no-print" id="analyze-btn">ç”Ÿæˆå¥åº·æŠ¥å‘Š</button>

        <div class="card result-section" id="result-section">
            <div class="no-print" style="text-align: right;">
                <button class="print-btn" onclick="window.print()">
                    <i>ğŸ–¨ï¸</i> æ‰“å°æŠ¥å‘Š
                </button>
            </div>

            <h2>æ‚¨çš„ä¸ªæ€§åŒ–å¥åº·æŠ¥å‘Š</h2>
            <p style="color: var(--gray); margin-bottom: 1.5rem;">ç”Ÿæˆæ—¥æœŸ: <span id="report-date"></span></p>

            <div class="progress-section no-print">
                <h3>å¥åº·è¯„ä¼°è¿›åº¦</h3>
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="progress-labels">
                    <span>0%</span>
                    <span>100%</span>
                </div>
            </div>

            <div class="health-status">
                <div class="status-card bmi-status">
                    <h3><i>ğŸ“Š</i> BMIæŒ‡æ•°</h3>
                    <div class="status-value" id="bmi-value">-</div>
                    <div class="status-description" id="bmi-category">-</div>
                </div>

                <div class="status-card">
                    <h3><i>âš–ï¸</i> ä½“é‡å¯¹æ¯”</h3>
                    <div class="status-value" id="weight-diff">-</div>
                    <div class="status-description" id="ideal-weight">æ ‡å‡†ä½“é‡: - kg</div>
                </div>

                <div class="status-card">
                    <h3><i>ğŸ“</i> è…°è‡€æ¯”</h3>
                    <div class="status-value" id="whr-value">-</div>
                    <div class="status-description" id="whr-category">-</div>
                </div>

                <div class="status-card">
                    <h3><i>ğŸ”¥</i> åŸºç¡€ä»£è°¢</h3>
                    <div class="status-value" id="bmr-value">-</div>
                    <div class="status-description">åƒå¡/å¤©</div>
                </div>
            </div>

            <div class="chart-container">
                <canvas id="health-chart"></canvas>
            </div>

            <div class="chart-container">
                <canvas id="nutrition-chart"></canvas>
            </div>

            <div class="tab-container">
                <div class="tabs">
                    <div class="tab active" data-tab="exercise">è¿åŠ¨å¤„æ–¹</div>
                    <div class="tab" data-tab="nutrition">è¥å…»è®¡åˆ’</div>
                    <div class="tab" data-tab="progress">è¿›åº¦å»ºè®®</div>
                </div>

                <div class="tab-content active" id="exercise-tab">
                    <div class="advice-section">
                        <h3><i>ğŸ‹ï¸</i> ç»¼åˆè¿åŠ¨å»ºè®®</h3>
                        <div id="exercise-summary"></div>

                        <div class="exercise-plan">
                            <h4>ä¸€å‘¨è¿åŠ¨è®¡åˆ’</h4>
                            <div id="weekly-exercise"></div>
                        </div>
                    </div>

                    <div class="advice-section nutrition">
                        <h3><i>ğŸ</i> è¿åŠ¨è¥å…»è¡¥å……å»ºè®®</h3>
                        <div id="exercise-nutrition"></div>
                    </div>
                </div>

                <div class="tab-content" id="nutrition-tab">
                    <div class="advice-section">
                        <h3><i>ğŸ½ï¸</i> æ¯æ—¥è¥å…»ç›®æ ‡</h3>
                        <div id="nutrition-goals"></div>

                        <div class="nutrition-plan">
                            <div class="meal-card">
                                <h4><i>ğŸŒ…</i> æ—©é¤å»ºè®®</h4>
                                <div id="breakfast-items"></div>
                            </div>
                            <div class="meal-card">
                                <h4><i>â˜€ï¸</i> åˆé¤å»ºè®®</h4>
                                <div id="lunch-items"></div>
                            </div>
                            <div class="meal-card">
                                <h4><i>ğŸŒ™</i> æ™šé¤å»ºè®®</h4>
                                <div id="dinner-items"></div>
                            </div>
                        </div>
                    </div>

                    <div class="advice-section">
                        <h3><i>ğŸ’§</i> æ°´åˆ†æ‘„å…¥å»ºè®®</h3>
                        <div id="water-intake"></div>
                    </div>
                </div>

                <div class="tab-content" id="progress-tab">
                    <div class="advice-section">
                        <h3><i>ğŸ“ˆ</i> å¥åº·è¿›åº¦è·Ÿè¸ª</h3>
                        <div id="progress-tracking"></div>
                    </div>

                    <div class="advice-section">
                        <h3><i>ğŸ”„</i> é˜¶æ®µæ€§è°ƒæ•´å»ºè®®</h3>
                        <div id="progress-adjustments"></div>
                    </div>

                    <div class="chart-container">
                        <canvas id="progress-chart"></canvas>
                    </div>
                </div>
            </div>

            <div class="advice-section notes">
                <h3><i>âš ï¸</i> å¥åº·æ³¨æ„äº‹é¡¹</h3>
                <div id="health-notes"></div>
            </div>

            <div class="advice-section warning" id="risk-factors-container" style="display: none;">
                <h3><i>â—</i> é«˜é£é™©å› ç´ </h3>
                <div id="risk-factors"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®æŠ¥å‘Šæ—¥æœŸ
            const now = new Date();
            document.getElementById('report-date').textContent = now.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });

            // æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    tabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                    // æ·»åŠ activeç±»åˆ°å½“å‰æ ‡ç­¾
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });

            // åˆ†ææŒ‰é’®ç‚¹å‡»äº‹ä»¶
            const analyzeBtn = document.getElementById('analyze-btn');
            analyzeBtn.addEventListener('click', generateHealthReport);

            // æ¨¡æ‹Ÿè¿›åº¦æ¡åŠ è½½
            function simulateProgress() {
                const progressBar = document.getElementById('progress-bar');
                let width = 0;
                const interval = setInterval(() => {
                    if (width >= 100) {
                        clearInterval(interval);
                    } else {
                        width += 5;
                        progressBar.style.width = width + '%';
                    }
                }, 50);
            }

            function generateHealthReport() {
                // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
                simulateProgress();

                // æ”¶é›†ç”¨æˆ·æ•°æ®
                const user = collectUserData();

                // éªŒè¯è¾“å…¥
                if (!validateInputs(user)) return;

                // è®¡ç®—å¥åº·æŒ‡æ ‡
                const metrics = calculateHealthMetrics(user);

                // ç”Ÿæˆå»ºè®®
                const advice = generateHealthAdvice(user, metrics);

                // æ˜¾ç¤ºç»“æœ
                displayResults(user, metrics, advice);

                // æ˜¾ç¤ºç»“æœéƒ¨åˆ†
                document.getElementById('result-section').style.display = 'block';

                // æ»šåŠ¨åˆ°ç»“æœ
                setTimeout(() => {
                    document.getElementById('result-section').scrollIntoView({ behavior: 'smooth' });
                }, 500);
            }

            function collectUserData() {
                return {
                    name: document.getElementById('name').value,
                    gender: document.getElementById('gender').value,
                    age: parseInt(document.getElementById('age').value),
                    height: parseInt(document.getElementById('height').value),
                    weight: parseFloat(document.getElementById('weight').value),
                    waist: parseInt(document.getElementById('waist').value) || 0,
                    hip: parseInt(document.getElementById('hip').value) || 0,
                    activity: document.getElementById('activity').value,
                    goal: document.getElementById('goal').value,
                    injuries: document.getElementById('injuries').value.toLowerCase(),
                    conditions: document.getElementById('conditions').value.toLowerCase()
                };
            }

            function validateInputs(user) {
                if (!user.name || !user.gender || !user.age || !user.height ||
                    !user.weight || !user.activity || !user.goal) {
                    alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µï¼');
                    return false;
                }
                return true;
            }

            function calculateHealthMetrics(user) {
                // è®¡ç®—BMI
                const heightInMeter = user.height / 100;
                const bmi = user.weight / (heightInMeter * heightInMeter);

                // è®¡ç®—æ ‡å‡†ä½“é‡ (Brocaå…¬å¼)
                let idealWeight;
                if (user.gender === 'male') {
                    idealWeight = (user.height - 80) * 0.7;
                } else {
                    idealWeight = (user.height - 70) * 0.6;
                }

                // è®¡ç®—è…°è‡€æ¯”
                const whr = user.waist > 0 && user.hip > 0 ? (user.waist / user.hip).toFixed(2) : null;

                // è®¡ç®—åŸºç¡€ä»£è°¢ç‡ (Mifflin-St Jeorå…¬å¼)
                let bmr;
                if (user.gender === 'male') {
                    bmr = 10 * user.weight + 6.25 * user.height - 5 * user.age + 5;
                } else {
                    bmr = 10 * user.weight + 6.25 * user.height - 5 * user.age - 161;
                }

                // æ´»åŠ¨ç³»æ•°
                let activityFactor;
                switch(user.activity) {
                    case 'sedentary': activityFactor = 1.2; break;
                    case 'light': activityFactor = 1.375; break;
                    case 'moderate': activityFactor = 1.55; break;
                    case 'active': activityFactor = 1.725; break;
                    case 'athlete': activityFactor = 1.9; break;
                    default: activityFactor = 1.2;
                }

                // æ¯æ—¥æ€»èƒ½é‡æ¶ˆè€—
                const tdee = Math.round(bmr * activityFactor);

                return {
                    bmi: bmi.toFixed(1),
                    bmiCategory: getBMICategory(bmi),
                    idealWeight: idealWeight.toFixed(1),
                    weightDiff: (user.weight - idealWeight).toFixed(1),
                    whr: whr,
                    whrCategory: whr ? getWHRCategory(whr, user.gender) : null,
                    bmr: Math.round(bmr),
                    tdee: tdee,
                    bodyFat: estimateBodyFat(user),
                    riskFactors: assessRiskFactors(user, bmi, whr)
                };
            }

            function getBMICategory(bmi) {
                if (bmi < 18.5) return {
                    text: 'ä½“é‡è¿‡è½»',
                    color: '#2196F3',
                    description: 'æ‚¨çš„ä½“é‡ä½äºå¥åº·èŒƒå›´ï¼Œå¯èƒ½éœ€è¦å¢åŠ ä½“é‡ä»¥æ”¹å–„å¥åº·çŠ¶å†µã€‚'
                };
                if (bmi < 24) return {
                    text: 'æ­£å¸¸èŒƒå›´',
                    color: '#4CAF50',
                    description: 'æ‚¨çš„ä½“é‡åœ¨å¥åº·èŒƒå›´å†…ï¼Œç»§ç»­ä¿æŒè‰¯å¥½çš„ç”Ÿæ´»ä¹ æƒ¯ã€‚'
                };
                if (bmi < 28) return {
                    text: 'è¶…é‡',
                    color: '#FFC107',
                    description: 'æ‚¨çš„ä½“é‡è¶…å‡ºå¥åº·èŒƒå›´ï¼Œå»ºè®®é€‚å½“å‡é‡ä»¥é™ä½å¥åº·é£é™©ã€‚'
                };
                return {
                    text: 'è‚¥èƒ–',
                    color: '#F44336',
                    description: 'æ‚¨çš„ä½“é‡æ˜¾è‘—è¶…å‡ºå¥åº·èŒƒå›´ï¼Œå»ºè®®åœ¨ä¸“ä¸šäººå£«æŒ‡å¯¼ä¸‹åˆ¶å®šå‡é‡è®¡åˆ’ã€‚'
                };
            }

            function getWHRCategory(whr, gender) {
                if (gender === 'male') {
                    if (whr > 0.9) return {
                        text: 'é«˜é£é™©',
                        color: '#F44336',
                        description: 'è…°è‡€æ¯”è¿‡é«˜ï¼Œè…¹éƒ¨è„‚è‚ªå †ç§¯æ˜¾è‘—å¢åŠ å¿ƒè¡€ç®¡ç–¾ç—…é£é™©ã€‚'
                    };
                    if (whr > 0.85) return {
                        text: 'åé«˜',
                        color: '#FFC107',
                        description: 'è…°è‡€æ¯”ç•¥é«˜ï¼Œéœ€è¦æ³¨æ„è…¹éƒ¨è„‚è‚ªçš„æ§åˆ¶ã€‚'
                    };
                    return {
                        text: 'æ­£å¸¸',
                        color: '#4CAF50',
                        description: 'è…°è‡€æ¯”åœ¨å¥åº·èŒƒå›´å†…ï¼Œç»§ç»­ä¿æŒã€‚'
                    };
                } else {
                    if (whr > 0.85) return {
                        text: 'é«˜é£é™©',
                        color: '#F44336',
                        description: 'è…°è‡€æ¯”è¿‡é«˜ï¼Œè…¹éƒ¨è„‚è‚ªå †ç§¯æ˜¾è‘—å¢åŠ å¿ƒè¡€ç®¡ç–¾ç—…é£é™©ã€‚'
                    };
                    if (whr > 0.8) return {
                        text: 'åé«˜',
                        color: '#FFC107',
                        description: 'è…°è‡€æ¯”ç•¥é«˜ï¼Œéœ€è¦æ³¨æ„è…¹éƒ¨è„‚è‚ªçš„æ§åˆ¶ã€‚'
                    };
                    return {
                        text: 'æ­£å¸¸',
                        color: '#4CAF50',
                        description: 'è…°è‡€æ¯”åœ¨å¥åº·èŒƒå›´å†…ï¼Œç»§ç»­ä¿æŒã€‚'
                    };
                }
            }

            function estimateBodyFat(user) {
                // ç®€å•çš„ä½“è„‚ç‡ä¼°ç®—ï¼ˆä¸åŒæ–¹æ³•ï¼‰
                let bodyFat;

                // æ–¹æ³•1ï¼šåŸºäºBMIçš„ä¼°ç®—
                if (user.gender === 'male') {
                    bodyFat = (1.20 * user.weight / ((user.height/100)**2)) + (0.23 * user.age) - 16.2;
                } else {
                    bodyFat = (1.20 * user.weight / ((user.height/100)**2)) + (0.23 * user.age) - 5.4;
                }

                // æ–¹æ³•2ï¼šç¾å›½æµ·å†›æ–¹æ³•ï¼ˆéœ€è¦é¢ˆå›´ï¼Œè¿™é‡Œç®€åŒ–ï¼‰
                // è¿”å›ä¸€ä¸ªèŒƒå›´å€¼
                return {
                    value: bodyFat.toFixed(1),
                    category: getBodyFatCategory(bodyFat, user.gender, user.age)
                };
            }

            function getBodyFatCategory(bodyFat, gender, age) {
                if (gender === 'male') {
                    if (age < 30) {
                        if (bodyFat < 8) return 'æä½';
                        if (bodyFat < 14) return 'ä¼˜ç§€';
                        if (bodyFat < 18) return 'è‰¯å¥½';
                        if (bodyFat < 24) return 'ä¸€èˆ¬';
                        return 'è¿‡é«˜';
                    } else if (age < 50) {
                        if (bodyFat < 10) return 'æä½';
                        if (bodyFat < 16) return 'ä¼˜ç§€';
                        if (bodyFat < 20) return 'è‰¯å¥½';
                        if (bodyFat < 26) return 'ä¸€èˆ¬';
                        return 'è¿‡é«˜';
                    } else {
                        if (bodyFat < 12) return 'æä½';
                        if (bodyFat < 18) return 'ä¼˜ç§€';
                        if (bodyFat < 22) return 'è‰¯å¥½';
                        if (bodyFat < 28) return 'ä¸€èˆ¬';
                        return 'è¿‡é«˜';
                    }
                } else {
                    if (age < 30) {
                        if (bodyFat < 18) return 'æä½';
                        if (bodyFat < 22) return 'ä¼˜ç§€';
                        if (bodyFat < 26) return 'è‰¯å¥½';
                        if (bodyFat < 32) return 'ä¸€èˆ¬';
                        return 'è¿‡é«˜';
                    } else if (age < 50) {
                        if (bodyFat < 20) return 'æä½';
                        if (bodyFat < 24) return 'ä¼˜ç§€';
                        if (bodyFat < 28) return 'è‰¯å¥½';
                        if (bodyFat < 34) return 'ä¸€èˆ¬';
                        return 'è¿‡é«˜';
                    } else {
                        if (bodyFat < 22) return 'æä½';
                        if (bodyFat < 26) return 'ä¼˜ç§€';
                        if (bodyFat < 30) return 'è‰¯å¥½';
                        if (bodyFat < 36) return 'ä¸€èˆ¬';
                        return 'è¿‡é«˜';
                    }
                }
            }

            function assessRiskFactors(user, bmi, whr) {
                const risks = [];

                // BMIç›¸å…³é£é™©
                if (bmi < 18.5) {
                    risks.push({
                        factor: 'ä½“é‡è¿‡è½»',
                        description: 'å¯èƒ½å¢åŠ éª¨è´¨ç–æ¾ã€å…ç–«åŠ›ä¸‹é™ç­‰é£é™©',
                        severity: 'ä¸­ç­‰'
                    });
                } else if (bmi >= 25) {
                    risks.push({
                        factor: bmi >= 30 ? 'è‚¥èƒ–' : 'è¶…é‡',
                        description: 'å¢åŠ å¿ƒè¡€ç®¡ç–¾ç—…ã€ç³–å°¿ç—…ç­‰æ…¢æ€§ç—…é£é™©',
                        severity: bmi >= 30 ? 'é«˜' : 'ä¸­ç­‰'
                    });
                }

                // è…°è‡€æ¯”é£é™©
                if (whr) {
                    const whrRisk = user.gender === 'male' ? whr > 0.9 : whr > 0.85;
                    if (whrRisk) {
                        risks.push({
                            factor: 'è…°è‡€æ¯”è¿‡é«˜',
                            description: 'è…¹éƒ¨è‚¥èƒ–æ˜¾è‘—å¢åŠ ä»£è°¢ç»¼åˆå¾é£é™©',
                            severity: 'é«˜'
                        });
                    }
                }

                // æ…¢æ€§ç—…é£é™©
                if (user.conditions.includes('é«˜è¡€å‹')) {
                    risks.push({
                        factor: 'é«˜è¡€å‹',
                        description: 'éœ€è¦å®šæœŸç›‘æµ‹è¡€å‹ï¼Œé¿å…å‰§çƒˆè¿åŠ¨',
                        severity: 'é«˜'
                    });
                }

                if (user.conditions.includes('ç³–å°¿ç—…')) {
                    risks.push({
                        factor: 'ç³–å°¿ç—…',
                        description: 'éœ€è¦æ§åˆ¶è¡€ç³–ï¼Œæ³¨æ„è¿åŠ¨å‰åçš„è¡€ç³–ç›‘æµ‹',
                        severity: 'é«˜'
                    });
                }

                if (user.conditions.includes('å¿ƒè„ç—…')) {
                    risks.push({
                        factor: 'å¿ƒè„ç—…',
                        description: 'éœ€è¦åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹è¿›è¡Œè¿åŠ¨',
                        severity: 'æé«˜'
                    });
                }

                // ä¼¤ç—…å²é£é™©
                if (user.injuries.includes('è†ç›–') || user.injuries.includes('è†å…³èŠ‚')) {
                    risks.push({
                        factor: 'è†å…³èŠ‚é—®é¢˜',
                        description: 'é¿å…é«˜å†²å‡»è¿åŠ¨ï¼Œé€‰æ‹©ä½å†²å‡»æ›¿ä»£æ–¹æ¡ˆ',
                        severity: 'ä¸­ç­‰'
                    });
                }

                if (user.injuries.includes('è…°æ¤') || user.injuries.includes('è…°éƒ¨')) {
                    risks.push({
                        factor: 'è…°éƒ¨é—®é¢˜',
                        description: 'é¿å…é‡é‡è¿‡å¤§çš„ç¡¬æ‹‰å’Œæ·±è¹²ï¼ŒåŠ å¼ºæ ¸å¿ƒè®­ç»ƒ',
                        severity: 'ä¸­ç­‰'
                    });
                }

                return risks;
            }

            function generateHealthAdvice(user, metrics) {
                // è¿åŠ¨å»ºè®®
                const exerciseAdvice = generateExerciseAdvice(user, metrics);

                // è¥å…»å»ºè®®
                const nutritionAdvice = generateNutritionAdvice(user, metrics);

                // è¿›åº¦è·Ÿè¸ªå»ºè®®
                const progressAdvice = generateProgressAdvice(user, metrics);

                // å¥åº·æ³¨æ„äº‹é¡¹
                const healthNotes = generateHealthNotes(user, metrics);

                return {
                    exercise: exerciseAdvice,
                    nutrition: nutritionAdvice,
                    progress: progressAdvice,
                    notes: healthNotes
                };
            }

            function generateExerciseAdvice(user, metrics) {
                const bmiCat = metrics.bmiCategory.text;
                const exerciseSummary = [];
                const weeklyExercise = [];
                const exerciseNutrition = [];

                // æ ¹æ®ç›®æ ‡ç”Ÿæˆè¿åŠ¨å»ºè®®
                switch(user.goal) {
                    case 'weight-loss':
                        exerciseSummary.push(`
                            <p><strong>ä¸»è¦ç›®æ ‡ï¼š</strong>å‡è„‚å‡é‡ï¼Œæ¯å‘¨ç›®æ ‡å‡é‡0.5-1kg</p>
                            <p><strong>æ ¸å¿ƒç­–ç•¥ï¼š</strong>åˆ›é€ çƒ­é‡ç¼ºå£ï¼Œä¿æŒè‚Œè‚‰é‡</p>
                        `);

                        // æœ‰æ°§è¿åŠ¨å»ºè®®
                        const cardioAdvice = {
                            type: 'æœ‰æ°§è¿åŠ¨',
                            frequency: '5-7å¤©/å‘¨',
                            duration: '30-60åˆ†é’Ÿ/æ¬¡',
                            intensity: 'ä¸­ç­‰(60-70%æœ€å¤§å¿ƒç‡)',
                            examples: 'å¿«èµ°ã€æ¸¸æ³³ã€éª‘è‡ªè¡Œè½¦ã€æ¤­åœ†æœº'
                        };

                        if (bmiCat === 'è‚¥èƒ–') {
                            cardioAdvice.notes = 'é€‰æ‹©ä½å†²å‡»è¿åŠ¨ï¼Œå¦‚æ¸¸æ³³ã€æ¤­åœ†æœºï¼Œå‡å°‘å…³èŠ‚å‹åŠ›';
                            cardioAdvice.examples = 'æ¸¸æ³³ã€æ°´ä¸­å¥èº«ã€æ¤­åœ†æœºã€éª‘è‡ªè¡Œè½¦';
                        }

                        // åŠ›é‡è®­ç»ƒå»ºè®®
                        const strengthAdvice = {
                            type: 'åŠ›é‡è®­ç»ƒ',
                            frequency: '2-3å¤©/å‘¨',
                            duration: '30-45åˆ†é’Ÿ/æ¬¡',
                            intensity: 'ä¸­ç­‰(60-70%1RM)',
                            examples: 'å…¨èº«å¤åˆåŠ¨ä½œï¼Œå¦‚æ·±è¹²ã€ä¿¯å§æ’‘ã€åˆ’èˆ¹',
                            notes: 'æ¯ç»„8-12æ¬¡ï¼Œ3-4ç»„ï¼Œä¿æŒè‚Œè‚‰é‡'
                        };

                        // HIITå»ºè®®ï¼ˆé€‚åˆä¸­çº§ä»¥ä¸Šï¼‰
                        if (user.activity === 'moderate' || user.activity === 'active' || user.activity === 'athlete') {
                            const hiitAdvice = {
                                type: 'é«˜å¼ºåº¦é—´æ­‡è®­ç»ƒ(HIIT)',
                                frequency: '1-2å¤©/å‘¨',
                                duration: '20-30åˆ†é’Ÿ/æ¬¡',
                                intensity: 'é«˜å¼ºåº¦(80-90%æœ€å¤§å¿ƒç‡)',
                                examples: 'å†²åˆºè·‘ã€æˆ˜ç»³ã€Burpees',
                                notes: 'è¿åŠ¨:ä¼‘æ¯=1:2æ¯”ä¾‹ï¼Œå¦‚30ç§’é«˜å¼ºåº¦+60ç§’ä¼‘æ¯'
                            };

                            weeklyExercise.push(createExercisePlan([
                                cardioAdvice, strengthAdvice, hiitAdvice
                            ]));
                        } else {
                            weeklyExercise.push(createExercisePlan([
                                cardioAdvice, strengthAdvice
                            ]));
                        }

                        // è¿åŠ¨è¥å…»å»ºè®®
                        exerciseNutrition.push(`
                            <p><strong>è¿åŠ¨å‰ï¼š</strong>é€‚é‡ç¢³æ°´åŒ–åˆç‰©(å¦‚é¦™è•‰)æä¾›èƒ½é‡</p>
                            <p><strong>è¿åŠ¨åï¼š</strong>è›‹ç™½è´¨+ç¢³æ°´åŒ–åˆç‰©(3:1æ¯”ä¾‹)ä¿ƒè¿›æ¢å¤</p>
                            <p><strong>æ°´åˆ†è¡¥å……ï¼š</strong>æ¯15-20åˆ†é’Ÿ150-300mlæ°´</p>
                        `);
                        break;

                    case 'muscle-gain':
                        exerciseSummary.push(`
                            <p><strong>ä¸»è¦ç›®æ ‡ï¼š</strong>å¢è‚Œå¡‘å½¢ï¼Œæ¯å‘¨ç›®æ ‡å¢é‡0.25-0.5kg(è‚Œè‚‰ä¸ºä¸»)</p>
                            <p><strong>æ ¸å¿ƒç­–ç•¥ï¼š</strong>æ¸è¿›è¶…è´Ÿè·è®­ç»ƒï¼Œçƒ­é‡ç›ˆä½™</p>
                        `);

                        // åŠ›é‡è®­ç»ƒå»ºè®®
                        const muscleStrengthAdvice = {
                            type: 'åŠ›é‡è®­ç»ƒ',
                            frequency: '3-5å¤©/å‘¨',
                            duration: '45-60åˆ†é’Ÿ/æ¬¡',
                            intensity: 'ä¸­é«˜(70-85%1RM)',
                            examples: 'å¤åˆåŠ¨ä½œä¸ºä¸»ï¼šæ·±è¹²ã€ç¡¬æ‹‰ã€å§æ¨ã€å¼•ä½“å‘ä¸Š',
                            notes: 'æ¯ç»„6-12æ¬¡ï¼Œ3-5ç»„ï¼Œæ¯å‘¨é€æ¸å¢åŠ é‡é‡'
                        };

                        // åˆ†åŒ–è®­ç»ƒæ–¹æ¡ˆ
                        const splitRoutine = [];
                        if (user.activity === 'beginner' || user.activity === 'light') {
                            splitRoutine.push({
                                day: 'å‘¨ä¸€/å‘¨å››',
                                focus: 'å…¨èº«è®­ç»ƒ',
                                exercises: [
                                    'æ·±è¹² 3x8-12',
                                    'å§æ¨ 3x8-12',
                                    'åˆ’èˆ¹ 3x8-12',
                                    'è‚©æ¨ 3x8-12',
                                    'å¹³æ¿æ”¯æ’‘ 3x30ç§’'
                                ]
                            });
                            splitRoutine.push({
                                day: 'å‘¨ä¸‰/å‘¨å…­',
                                focus: 'å…¨èº«è®­ç»ƒ',
                                exercises: [
                                    'ç¡¬æ‹‰ 3x6-8',
                                    'å¼•ä½“å‘ä¸Š 3xæœ€å¤§æ¬¡æ•°',
                                    'è…¿ä¸¾ 3x10-12',
                                    'äºŒå¤´å¼¯ä¸¾ 3x10-12',
                                    'å·è…¹ 3x15-20'
                                ]
                            });
                        } else {
                            splitRoutine.push({
                                day: 'å‘¨ä¸€',
                                focus: 'èƒ¸/ä¸‰å¤´è‚Œ',
                                exercises: [
                                    'å¹³æ¿å§æ¨ 4x6-8',
                                    'ä¸Šæ–œå“‘é“ƒå§æ¨ 3x8-10',
                                    'åŒæ è‡‚å±ˆä¼¸ 3x8-10',
                                    'ç»³ç´¢ä¸‹å‹ 3x10-12',
                                    'ä»°å§è‡‚å±ˆä¼¸ 3x10-12'
                                ]
                            });
                            splitRoutine.push({
                                day: 'å‘¨äºŒ',
                                focus: 'èƒŒ/äºŒå¤´è‚Œ',
                                exercises: [
                                    'ç¡¬æ‹‰ 4x5',
                                    'å¼•ä½“å‘ä¸Š 4xæœ€å¤§æ¬¡æ•°',
                                    'æ é“ƒåˆ’èˆ¹ 3x8-10',
                                    'å“‘é“ƒå¼¯ä¸¾ 3x10-12',
                                    'é”¤å¼å¼¯ä¸¾ 3x10-12'
                                ]
                            });
                            splitRoutine.push({
                                day: 'å‘¨å››',
                                focus: 'è…¿/æ ¸å¿ƒ',
                                exercises: [
                                    'æ·±è¹² 4x6-8',
                                    'è…¿ä¸¾ 3x8-10',
                                    'ç½—é©¬å°¼äºšç¡¬æ‹‰ 3x8-10',
                                    'è…¿å¼¯ä¸¾ 3x10-12',
                                    'å¹³æ¿æ”¯æ’‘ 3x45ç§’'
                                ]
                            });
                            splitRoutine.push({
                                day: 'å‘¨äº”',
                                focus: 'è‚©/è…¹è‚Œ',
                                exercises: [
                                    'ç«™å§¿æ é“ƒæ¨ä¸¾ 4x6-8',
                                    'ä¾§å¹³ä¸¾ 3x10-12',
                                    'é¢æ‹‰ 3x12-15',
                                    'æ‚¬å‚ä¸¾è…¿ 3x12-15',
                                    'ä¿„ç½—æ–¯è½¬ä½“ 3x15æ¯ä¾§'
                                ]
                            });
                        }

                        weeklyExercise.push(createSplitRoutine(splitRoutine));

                        // æœ‰æ°§è¿åŠ¨å»ºè®®
                        const muscleCardioAdvice = {
                            type: 'æœ‰æ°§è¿åŠ¨',
                            frequency: '1-2å¤©/å‘¨',
                            duration: '20-30åˆ†é’Ÿ/æ¬¡',
                            intensity: 'ä½(50-60%æœ€å¤§å¿ƒç‡)',
                            examples: 'æ…¢è·‘ã€éª‘è‡ªè¡Œè½¦ã€æ¸¸æ³³',
                            notes: 'ä¿æŒä½å¼ºåº¦ä»¥é¿å…å½±å“è‚Œè‚‰å¢é•¿'
                        };

                        weeklyExercise.push(createExercisePlan([muscleCardioAdvice]));

                        // è¿åŠ¨è¥å…»å»ºè®®
                        exerciseNutrition.push(`
                            <p><strong>è®­ç»ƒå‰ï¼š</strong>ç¢³æ°´åŒ–åˆç‰©+å°‘é‡è›‹ç™½è´¨(å¦‚ç‡•éº¦+è›‹ç™½ç²‰)</p>
                            <p><strong>è®­ç»ƒåï¼š</strong>å¿«é€Ÿå¸æ”¶è›‹ç™½è´¨(ä¹³æ¸…è›‹ç™½)+é«˜GIç¢³æ°´</p>
                            <p><strong>ç¡å‰ï¼š</strong>ç¼“é‡Šè›‹ç™½è´¨(é…ªè›‹ç™½)ä¿ƒè¿›å¤œé—´æ¢å¤</p>
                        `);
                        break;

                    // å…¶ä»–ç›®æ ‡æ¡ˆä¾‹...
                    default:
                        exerciseSummary.push(`<p>æ ¹æ®æ‚¨çš„ç›®æ ‡æä¾›ä¸ªæ€§åŒ–è¿åŠ¨å»ºè®®</p>`);
                }

                // æ ¹æ®ä¼¤ç—…å²è°ƒæ•´
                if (user.injuries.includes('è†ç›–') || user.injuries.includes('è†å…³èŠ‚')) {
                    exerciseSummary.push(`
                        <p class="warning-note"><strong>è†å…³èŠ‚ä¿æŠ¤ï¼š</strong>é¿å…è·‘æ­¥ã€è·³è·ƒç­‰é«˜å†²å‡»è¿åŠ¨ï¼Œé€‰æ‹©æ¸¸æ³³ã€éª‘è‡ªè¡Œè½¦ç­‰ä½å†²å‡»æ›¿ä»£æ–¹æ¡ˆ</p>
                    `);
                }

                if (user.injuries.includes('è…°æ¤') || user.injuries.includes('è…°éƒ¨')) {
                    exerciseSummary.push(`
                        <p class="warning-note"><strong>è…°éƒ¨ä¿æŠ¤ï¼š</strong>é¿å…é‡é‡è¿‡å¤§çš„ç¡¬æ‹‰å’Œæ·±è¹²ï¼ŒåŠ å¼ºæ ¸å¿ƒè‚Œç¾¤è®­ç»ƒ</p>
                    `);
                }

                return {
                    summary: exerciseSummary.join(''),
                    weeklyPlan: weeklyExercise.join(''),
                    nutrition: exerciseNutrition.join('')
                };
            }

            function createExercisePlan(advices) {
                let html = '<div class="advice-grid">';

                advices.forEach(advice => {
                    html += `
                        <div class="advice-item">
                            <h4><i>${getExerciseIcon(advice.type)}</i> ${advice.type}</h4>
                            <p><strong>é¢‘ç‡ï¼š</strong>${advice.frequency}</p>
                            <p><strong>æ—¶é•¿ï¼š</strong>${advice.duration}</p>
                            <p><strong>å¼ºåº¦ï¼š</strong>${advice.intensity}</p>
                            <p><strong>ç¤ºä¾‹ï¼š</strong>${advice.examples}</p>
                            ${advice.notes ? `<p><strong>æ³¨æ„ï¼š</strong>${advice.notes}</p>` : ''}
                        </div>
                    `;
                });

                html += '</div>';
                return html;
            }

            function createSplitRoutine(splitRoutine) {
                let html = '';

                splitRoutine.forEach(day => {
                    html += `
                        <div class="exercise-day">
                            <h4>${day.day} - ${day.focus}</h4>
                            <ul style="list-style-type: none; padding-left: 0;">
                                ${day.exercises.map(ex => `<li>â€¢ ${ex}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                });

                return html;
            }

            function getExerciseIcon(type) {
                const icons = {
                    'æœ‰æ°§è¿åŠ¨': 'ğŸƒ',
                    'åŠ›é‡è®­ç»ƒ': 'ğŸ‹ï¸',
                    'é«˜å¼ºåº¦é—´æ­‡è®­ç»ƒ': 'âš¡',
                    'æŸ”éŸ§æ€§è®­ç»ƒ': 'ğŸ§˜',
                    'æ ¸å¿ƒè®­ç»ƒ': 'ğŸ”„'
                };
                return icons[type] || 'ğŸ…';
            }

            function generateNutritionAdvice(user, metrics) {
                const nutritionGoals = [];
                const mealPlans = [];
                const waterIntake = [];

                // è®¡ç®—æ¯æ—¥è¥å…»éœ€æ±‚
                const proteinNeeds = user.goal === 'muscle-gain' ?
                    Math.round(user.weight * 1.8) : Math.round(user.weight * 1.4);
                const carbNeeds = Math.round((metrics.tdee * 0.45) / 4); // 45%çƒ­é‡æ¥è‡ªç¢³æ°´
                const fatNeeds = Math.round((metrics.tdee * 0.3) / 9); // 30%çƒ­é‡æ¥è‡ªè„‚è‚ª

                // æ ¹æ®ç›®æ ‡è°ƒæ•´çƒ­é‡
                let calorieTarget = metrics.tdee;
                if (user.goal === 'weight-loss') calorieTarget -= 300;
                if (user.goal === 'muscle-gain') calorieTarget += 300;

                nutritionGoals.push(`
                    <p><strong>æ¯æ—¥çƒ­é‡ç›®æ ‡ï¼š</strong>${calorieTarget}åƒå¡</p>
                    <p><strong>è›‹ç™½è´¨ï¼š</strong>${proteinNeeds}g (${Math.round(proteinNeeds*4/calorieTarget*100)}%çƒ­é‡)</p>
                    <p><strong>ç¢³æ°´åŒ–åˆç‰©ï¼š</strong>${carbNeeds}g (45%çƒ­é‡)</p>
                    <p><strong>è„‚è‚ªï¼š</strong>${fatNeeds}g (30%çƒ­é‡)</p>
                    <p><strong>è†³é£Ÿçº¤ç»´ï¼š</strong>25-30g</p>
                `);

                // ç”Ÿæˆé¤é£Ÿå»ºè®®
                mealPlans.push(generateMealPlan(user, metrics));

                // æ°´åˆ†å»ºè®®
                const waterNeeds = Math.round(user.weight * 35); // 35ml/kg
                waterIntake.push(`
                    <p><strong>æ¯æ—¥æ°´åˆ†æ‘„å…¥ï¼š</strong>${waterNeeds}ml (çº¦${Math.round(waterNeeds/250)}æ¯)</p>
                    <p><strong>è¿åŠ¨è¡¥æ°´ï¼š</strong>æ¯15-20åˆ†é’Ÿè¡¥å……150-300mlæ°´</p>
                    <p><strong>æ°´åˆ†æ¥æºï¼š</strong>æ°´ã€æ·¡èŒ¶ã€æ— ç³–é¥®æ–™ä¸ºä¸»ï¼Œé™åˆ¶å«ç³–é¥®æ–™</p>
                `);

                return {
                    goals: nutritionGoals.join(''),
                    meals: mealPlans.join(''),
                    water: waterIntake.join('')
                };
            }

            function generateMealPlan(user, metrics) {
                // æ ¹æ®ç›®æ ‡ç”Ÿæˆä¸åŒçš„é¤é£Ÿå»ºè®®
                let breakfast, lunch, dinner;

                if (user.goal === 'weight-loss') {
                    breakfast = [
                        { name: 'ç‡•éº¦ç‰‡', amount: '40g' },
                        { name: 'é¸¡è›‹', amount: '2ä¸ª' },
                        { name: 'ç‰›å¥¶', amount: '200ml' },
                        { name: 'åšæœ', amount: '10g' }
                    ];

                    lunch = [
                        { name: 'ç³™ç±³é¥­', amount: '100g' },
                        { name: 'é¸¡èƒ¸è‚‰', amount: '150g' },
                        { name: 'è”¬èœ', amount: '200g' },
                        { name: 'æ©„æ¦„æ²¹', amount: '5g' }
                    ];

                    dinner = [
                        { name: 'çº¢è–¯', amount: '150g' },
                        { name: 'ä¸‰æ–‡é±¼', amount: '120g' },
                        { name: 'è”¬èœæ²™æ‹‰', amount: '200g' },
                        { name: 'ç‰›æ²¹æœ', amount: '30g' }
                    ];
                } else if (user.goal === 'muscle-gain') {
                    breakfast = [
                        { name: 'å…¨éº¦é¢åŒ…', amount: '2ç‰‡' },
                        { name: 'é¸¡è›‹', amount: '3ä¸ª' },
                        { name: 'å¥¶é…ª', amount: '30g' },
                        { name: 'èŠ±ç”Ÿé…±', amount: '15g' },
                        { name: 'é¦™è•‰', amount: '1æ ¹' }
                    ];

                    lunch = [
                        { name: 'ç³™ç±³é¥­', amount: '150g' },
                        { name: 'ç‰›è‚‰', amount: '200g' },
                        { name: 'è”¬èœ', amount: '200g' },
                        { name: 'æ©„æ¦„æ²¹', amount: '10g' }
                    ];

                    dinner = [
                        { name: 'è—œéº¦', amount: '100g' },
                        { name: 'é¸¡è…¿è‚‰(å»çš®)', amount: '180g' },
                        { name: 'è”¬èœ', amount: '200g' },
                        { name: 'åšæœ', amount: '15g' }
                    ];
                } else {
                    // é»˜è®¤ä¿æŒå¥åº·çš„é¤é£Ÿ
                    breakfast = [
                        { name: 'ç‡•éº¦ç‰‡', amount: '50g' },
                        { name: 'é¸¡è›‹', amount: '2ä¸ª' },
                        { name: 'ç‰›å¥¶', amount: '200ml' },
                        { name: 'æ°´æœ', amount: '1ä»½' }
                    ];

                    lunch = [
                        { name: 'æ‚ç²®é¥­', amount: '100g' },
                        { name: 'é±¼è‚‰', amount: '150g' },
                        { name: 'è”¬èœ', amount: '200g' },
                        { name: 'æ©„æ¦„æ²¹', amount: '5g' }
                    ];

                    dinner = [
                        { name: 'å…¨éº¦æ„é¢', amount: '80g' },
                        { name: 'é¸¡èƒ¸è‚‰', amount: '120g' },
                        { name: 'è”¬èœæ²™æ‹‰', amount: '200g' },
                        { name: 'åšæœ', amount: '10g' }
                    ];
                }

                // ç”ŸæˆHTML
                let html = '';

                // æ—©é¤
                html += '<div id="breakfast-items">';
                breakfast.forEach(item => {
                    html += `
                        <div class="meal-item">
                            <span class="meal-item-name">${item.name}</span>
                            <span class="meal-item-amount">${item.amount}</span>
                        </div>
                    `;
                });
                html += '</div>';

                // åˆé¤
                html += '<div id="lunch-items">';
                lunch.forEach(item => {
                    html += `
                        <div class="meal-item">
                            <span class="meal-item-name">${item.name}</span>
                            <span class="meal-item-amount">${item.amount}</span>
                        </div>
                    `;
                });
                html += '</div>';

                // æ™šé¤
                html += '<div id="dinner-items">';
                dinner.forEach(item => {
                    html += `
                        <div class="meal-item">
                            <span class="meal-item-name">${item.name}</span>
                            <span class="meal-item-amount">${item.amount}</span>
                        </div>
                    `;
                });
                html += '</div>';

                return html;
            }

            function generateProgressAdvice(user, metrics) {
                const tracking = [];
                const adjustments = [];

                // è¿›åº¦è·Ÿè¸ªå»ºè®®
                tracking.push(`
                    <p><strong>ä½“é‡è®°å½•ï¼š</strong>æ¯å‘¨åŒä¸€æ—¶é—´æµ‹é‡1-2æ¬¡ï¼Œè®°å½•å˜åŒ–è¶‹åŠ¿</p>
                    <p><strong>ä½“å›´æµ‹é‡ï¼š</strong>æ¯æœˆæµ‹é‡è…°å›´ã€è‡€å›´ã€è‡‚å›´ç­‰</p>
                    <p><strong>è¿åŠ¨è¡¨ç°ï¼š</strong>è®°å½•åŠ›é‡è®­ç»ƒçš„è´Ÿé‡å’Œæ¬¡æ•°å˜åŒ–</p>
                    <p><strong>ä¸»è§‚æ„Ÿå—ï¼š</strong>è®°å½•èƒ½é‡æ°´å¹³ã€ç¡çœ è´¨é‡å’Œè¿åŠ¨æ¢å¤æƒ…å†µ</p>
                `);

                // é˜¶æ®µæ€§è°ƒæ•´å»ºè®®
                adjustments.push(`
                    <p><strong>4å‘¨è¯„ä¼°ï¼š</strong>æ ¹æ®è¿›å±•è°ƒæ•´è¿åŠ¨å¼ºåº¦å’Œé¥®é£Ÿè®¡åˆ’</p>
                    <p><strong>å¹³å°æœŸå¤„ç†ï¼š</strong>æ”¹å˜è®­ç»ƒå˜é‡(ç»„æ•°ã€æ¬¡æ•°ã€ä¼‘æ¯æ—¶é—´)</p>
                    <p><strong>è¿‡åº¦è®­ç»ƒè¯†åˆ«ï¼š</strong>æ³¨æ„ç–²åŠ³ç§¯ç´¯ã€ç¡çœ éšœç¢ç­‰ä¿¡å·</p>
                `);

                return {
                    tracking: tracking.join(''),
                    adjustments: adjustments.join('')
                };
            }

            function generateHealthNotes(user, metrics) {
                const notes = [];

                // ä¸€èˆ¬å¥åº·å»ºè®®
                notes.push(`
                    <p><strong>ç¡çœ ï¼š</strong>ä¿è¯7-9å°æ—¶é«˜è´¨é‡ç¡çœ ï¼Œä¿ƒè¿›æ¢å¤</p>
                    <p><strong>å‹åŠ›ç®¡ç†ï¼š</strong>é€šè¿‡å†¥æƒ³ã€æ·±å‘¼å¸ç­‰æ–¹å¼æ§åˆ¶å‹åŠ›æ°´å¹³</p>
                `);

                // æ ¹æ®BMIçš„å»ºè®®
                const bmiCat = metrics.bmiCategory.text;
                if (bmiCat === 'è‚¥èƒ–') {
                    notes.push(`
                        <p><strong>å‡é‡å»ºè®®ï¼š</strong>å¾ªåºæ¸è¿›ï¼Œæ¯å‘¨å‡é‡ä¸è¶…è¿‡1kg</p>
                        <p><strong>è¿åŠ¨é€‰æ‹©ï¼š</strong>ä»ä½å†²å‡»è¿åŠ¨å¼€å§‹ï¼Œé€æ­¥å¢åŠ å¼ºåº¦</p>
                    `);
                } else if (bmiCat === 'ä½“é‡è¿‡è½»') {
                    notes.push(`
                        <p><strong>å¢é‡å»ºè®®ï¼š</strong>é€šè¿‡åŠ›é‡è®­ç»ƒå’Œçƒ­é‡ç›ˆä½™å¥åº·å¢é‡</p>
                    `);
                }

                // æ ¹æ®æ…¢æ€§ç—…çš„å»ºè®®
                if (user.conditions.includes('é«˜è¡€å‹')) {
                    notes.push(`
                        <p><strong>è¡€å‹ç®¡ç†ï¼š</strong>é™åˆ¶é’ ç›æ‘„å…¥ï¼Œç›‘æµ‹è¡€å‹å˜åŒ–</p>
                        <p><strong>è¿åŠ¨æ³¨æ„ï¼š</strong>é¿å…å±æ°”ç”¨åŠ›ï¼Œé€‰æ‹©ä¸­ç­‰å¼ºåº¦æœ‰æ°§</p>
                    `);
                }

                if (user.conditions.includes('ç³–å°¿ç—…')) {
                    notes.push(`
                        <p><strong>è¡€ç³–ç®¡ç†ï¼š</strong>è¿åŠ¨å‰åç›‘æµ‹è¡€ç³–ï¼Œé¢„é˜²ä½è¡€ç³–</p>
                        <p><strong>é¥®é£Ÿæ³¨æ„ï¼š</strong>é€‰æ‹©ä½GIé£Ÿç‰©ï¼Œæ§åˆ¶ç¢³æ°´æ‘„å…¥æ—¶é—´</p>
                    `);
                }

                // æ ¹æ®ä¼¤ç—…å²çš„å»ºè®®
                if (user.injuries.includes('è†ç›–') || user.injuries.includes('è†å…³èŠ‚')) {
                    notes.push(`
                        <p><strong>è†å…³èŠ‚ä¿æŠ¤ï¼š</strong>åŠ å¼ºè‚¡å››å¤´è‚Œå’Œè‡€è‚ŒåŠ›é‡ï¼Œæ”¹å–„åŠ¨ä½œæ¨¡å¼</p>
                    `);
                }

                if (user.injuries.includes('è…°æ¤') || user.injuries.includes('è…°éƒ¨')) {
                    notes.push(`
                        <p><strong>è…°éƒ¨ä¿æŠ¤ï¼š</strong>é¿å…é•¿æ—¶é—´å¼¯è…°ï¼ŒåŠ å¼ºæ ¸å¿ƒç¨³å®šæ€§</p>
                    `);
                }

                return notes.join('');
            }

            function displayResults(user, metrics, advice) {
                // æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯
                document.getElementById('bmi-value').textContent = metrics.bmi;
                document.getElementById('bmi-value').style.color = metrics.bmiCategory.color;
                document.getElementById('bmi-category').textContent =
                    `${metrics.bmiCategory.text} - ${metrics.bmiCategory.description}`;

                // æ˜¾ç¤ºä½“é‡å¯¹æ¯”
                document.getElementById('ideal-weight').textContent = `æ ‡å‡†ä½“é‡: ${metrics.idealWeight} kg`;
                const weightDiff = metrics.weightDiff;
                let weightStatus, weightColor;
                if (weightDiff > 0) {
                    weightStatus = `è¶…å‡ºæ ‡å‡† ${weightDiff} kg`;
                    weightColor = '#F44336';
                } else {
                    weightStatus = `ä½äºæ ‡å‡† ${Math.abs(weightDiff)} kg`;
                    weightColor = '#2196F3';
                }
                document.getElementById('weight-diff').textContent = weightStatus;
                document.getElementById('weight-diff').style.color = weightColor;

                // æ˜¾ç¤ºè…°è‡€æ¯”
                if (metrics.whr) {
                    document.getElementById('whr-value').textContent = metrics.whr;
                    document.getElementById('whr-value').style.color = metrics.whrCategory.color;
                    document.getElementById('whr-category').textContent =
                        `${metrics.whrCategory.text} - ${metrics.whrCategory.description}`;
                } else {
                    document.getElementById('whr-value').textContent = 'æœªæµ‹é‡';
                    document.getElementById('whr-category').textContent = 'è¯·æµ‹é‡è…°å›´å’Œè‡€å›´è·å–æ•°æ®';
                }

                // æ˜¾ç¤ºåŸºç¡€ä»£è°¢
                document.getElementById('bmr-value').textContent = metrics.bmr;

                // æ˜¾ç¤ºè¿åŠ¨å»ºè®®
                document.getElementById('exercise-summary').innerHTML = advice.exercise.summary;
                document.getElementById('weekly-exercise').innerHTML = advice.exercise.weeklyPlan;
                document.getElementById('exercise-nutrition').innerHTML = advice.exercise.nutrition;

                // æ˜¾ç¤ºè¥å…»å»ºè®®
                document.getElementById('nutrition-goals').innerHTML = advice.nutrition.goals;
                document.getElementById('water-intake').innerHTML = advice.nutrition.water;

                // æ˜¾ç¤ºè¿›åº¦å»ºè®®
                document.getElementById('progress-tracking').innerHTML = advice.progress.tracking;
                document.getElementById('progress-adjustments').innerHTML = advice.progress.adjustments;

                // æ˜¾ç¤ºå¥åº·æ³¨æ„äº‹é¡¹
                document.getElementById('health-notes').innerHTML = advice.notes;

                // æ˜¾ç¤ºé«˜é£é™©å› ç´ ï¼ˆå¦‚æœæœ‰ï¼‰
                if (metrics.riskFactors.length > 0) {
                    document.getElementById('risk-factors-container').style.display = 'block';
                    let riskHtml = '';
                    metrics.riskFactors.forEach(risk => {
                        riskHtml += `
                            <div class="advice-item" style="margin-bottom: 0.8rem;">
                                <h4 style="color: ${risk.severity === 'é«˜' || risk.severity === 'æé«˜' ? '#F44336' : '#FFC107'}">
                                    ${risk.factor} (${risk.severity}é£é™©)
                                </h4>
                                <p>${risk.description}</p>
                            </div>
                        `;
                    });
                    document.getElementById('risk-factors').innerHTML = riskHtml;
                }

                // åˆ›å»ºå›¾è¡¨
                createHealthChart(user, metrics);
                createNutritionChart(user, metrics);
                createProgressChart(user, metrics);
            }

            function createHealthChart(user, metrics) {
                const ctx = document.getElementById('health-chart').getContext('2d');

                // é”€æ¯æ—§å›¾è¡¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                if (window.healthChart) {
                    window.healthChart.destroy();
                }

                const weightDiff = parseFloat(metrics.weightDiff);

                window.healthChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['æ‚¨çš„ä½“é‡', 'æ ‡å‡†ä½“é‡', 'BMIæŒ‡æ•°', 'ä½“é‡å·®è·'],
                        datasets: [{
                            label: 'å¥åº·æŒ‡æ ‡',
                            data: [
                                user.weight,
                                parseFloat(metrics.idealWeight),
                                parseFloat(metrics.bmi),
                                Math.abs(weightDiff)
                            ],
                            backgroundColor: [
                                'rgba(66, 133, 244, 0.7)',
                                'rgba(52, 168, 83, 0.7)',
                                'rgba(255, 193, 7, 0.7)',
                                weightDiff > 0 ? 'rgba(234, 67, 53, 0.7)' : 'rgba(66, 133, 244, 0.7)'
                            ],
                            borderColor: [
                                'rgba(66, 133, 244, 1)',
                                'rgba(52, 168, 83, 1)',
                                'rgba(255, 193, 7, 1)',
                                weightDiff > 0 ? 'rgba(234, 67, 53, 1)' : 'rgba(66, 133, 244, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'æ•°å€¼'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'å¥åº·æŒ‡æ ‡å¯¹æ¯”',
                                font: {
                                    size: 16,
                                    weight: 'bold'
                                }
                            },
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) label += ': ';
                                        if (context.parsed.y !== null) {
                                            if (context.label === 'BMIæŒ‡æ•°') {
                                                label += context.parsed.y + ' (' + metrics.bmiCategory.text + ')';
                                            } else if (context.label === 'ä½“é‡å·®è·') {
                                                label += context.parsed.y + ' kg (' + (weightDiff > 0 ? 'è¶…å‡º' : 'ä½äº') + 'æ ‡å‡†)';
                                            } else {
                                                label += context.parsed.y + (context.label.includes('ä½“é‡') ? ' kg' : '');
                                            }
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function createNutritionChart(user, metrics) {
                const ctx = document.getElementById('nutrition-chart').getContext('2d');

                // è®¡ç®—è¥å…»ç´ æ¯”ä¾‹
                const protein = user.goal === 'muscle-gain' ? user.weight * 1.8 * 4 : user.weight * 1.4 * 4;
                const carbs = metrics.tdee * 0.45;
                const fat = metrics.tdee * 0.3;
                const remaining = metrics.tdee - protein - carbs - fat;

                if (window.nutritionChart) {
                    window.nutritionChart.destroy();
                }

                window.nutritionChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['è›‹ç™½è´¨', 'ç¢³æ°´åŒ–åˆç‰©', 'è„‚è‚ª', 'å…¶ä»–'],
                        datasets: [{
                            data: [protein, carbs, fat, remaining],
                            backgroundColor: [
                                'rgba(66, 133, 244, 0.7)',
                                'rgba(52, 168, 83, 0.7)',
                                'rgba(255, 193, 7, 0.7)',
                                'rgba(234, 67, 53, 0.7)'
                            ],
                            borderColor: [
                                'rgba(66, 133, 244, 1)',
                                'rgba(52, 168, 83, 1)',
                                'rgba(255, 193, 7, 1)',
                                'rgba(234, 67, 53, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            title: {
                                display: true,
                                text: 'æ¯æ—¥è¥å…»ç´ åˆ†é…',
                                font: {
                                    size: 16,
                                    weight: 'bold'
                                }
                            },
                            legend: {
                                position: 'right',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.raw || 0;
                                        const percentage = Math.round(value / metrics.tdee * 100);
                                        return `${label}: ${value.toFixed(0)}åƒå¡ (${percentage}%)`;
                                    }
                                }
                            },
                            datalabels: {
                                formatter: (value) => {
                                    return Math.round(value / metrics.tdee * 100) + '%';
                                },
                                color: '#fff',
                                font: {
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    plugins: [ChartDataLabels]
                });
            }

            function createProgressChart(user, metrics) {
                const ctx = document.getElementById('progress-chart').getContext('2d');

                // æ¨¡æ‹Ÿ12å‘¨è¿›åº¦æ•°æ®
                const weeks = Array.from({length: 12}, (_, i) => `ç¬¬${i+1}å‘¨`);
                let weightData;

                if (user.goal === 'weight-loss') {
                    const startWeight = user.weight;
                    const targetLoss = 0.5; // æ¯å‘¨å‡0.5kg
                    weightData = weeks.map((_, i) => startWeight - (i * targetLoss));
                } else if (user.goal === 'muscle-gain') {
                    const startWeight = user.weight;
                    const targetGain = 0.25; // æ¯å‘¨å¢0.25kg
                    weightData = weeks.map((_, i) => startWeight + (i * targetGain));
                } else {
                    const startWeight = user.weight;
                    weightData = weeks.map(() => startWeight);
                }

                if (window.progressChart) {
                    window.progressChart.destroy();
                }

                window.progressChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: weeks,
                        datasets: [{
                            label: 'ä½“é‡å˜åŒ– (kg)',
                            data: weightData,
                            borderColor: 'rgba(66, 133, 244, 1)',
                            backgroundColor: 'rgba(66, 133, 244, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: false,
                                title: {
                                    display: true,
                                    text: 'ä½“é‡ (kg)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'å‘¨æ•°'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: '12å‘¨ä½“é‡å˜åŒ–é¢„æµ‹',
                                font: {
                                    size: 16,
                                    weight: 'bold'
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.parsed.y.toFixed(1)} kg`;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>